(self.webpackChunklite=self.webpackChunklite||[]).push([[303],{4697:(e,n,t)=>{"use strict";t.d(n,{Xw:()=>V,e0:()=>I,Rf:()=>N});var r=t(59713),o=t.n(r),i=t(28655),l=t.n(i),a=t(71439),s=t(67294),u=t(90194),c=t(7530),d=t(27572),p=t(534);function m(){var e=l()(["\n  fragment NewsletterV3AmpButton_newsletterV3 on NewsletterV3 {\n    id\n    collection {\n      ...collectionDefaultBackgroundTheme_collection\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g=(0,a.Ps)(m(),p.Gi),f=function(e){var n=e.newsletterV3,t=e.buttonLayout,r=void 0===t?"MULTI-LINE":t,o=e.buttonSize,i=void 0===o?"LARGE":o,l=e.buttonStyle,a=void 0===l?"STRONG":l,m=e.redirectUrl;return s.createElement(c.Yi,null,(function(e){return s.createElement(c.f6,{theme:(0,p.jN)(null==n?void 0:n.collection,e)},s.createElement(d.cW,{source:{newsletterV3Id:n.id},extendSource:!0},s.createElement(c.xu,{margin:"COMPACT"===r?"10px 20px 10px 0":"",xs:{margin:"10px 0 0 0"}},s.createElement(u.w,{buttonSize:i,buttonStyle:a,newsletterV3Id:null==n?void 0:n.id,onClick:function(){return null},showMailIcon:!1,buttonText:"Learn more",redirectUrl:m}))))}))},v=t(31429),h=t(55346),b=t(53976),y=t(34675),E=t(64504),w=t(62630),x=t(28309),P=t(72955),O=t(14391),_=t(67297),M=t(80637),S=t(27952);function C(){var e=l()(["\n  fragment NewsletterV3Promo_publisher on Publisher {\n    __typename\n    ... on User {\n      id\n      username\n      name\n      viewerIsUser\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n    ... on Collection {\n      id\n      slug\n      domain\n      name\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function T(){var e=l()(["\n  fragment NewsletterV3Promo_newsletterV3 on NewsletterV3 {\n    slug\n    name\n    description\n    ...NewsletterV3AmpButton_newsletterV3\n    ...NewsletterV3SubscribeButton_newsletterV3\n    ...NewsletterV3SubscribeByEmail_newsletterV3\n  }\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}var I=(0,a.Ps)(T(),g,v.B,h.Lh),N=(0,a.Ps)(C(),I),A=function(e){return o()({borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},M.sm(e),{padding:"24px 24px 28px 24px"})},R=function(e){var n=e.isAmp,t=e.viewer,r=e.newsletterV3,o=e.newsletterV3LandingUrl,i=e.useCustomDomainLOFlow;return n?r&&s.createElement(f,{newsletterV3:r,buttonLayout:"COMPACT",redirectUrl:o}):t||i?r&&s.createElement(v.x,{newsletterV3:r,buttonLayout:"COMPACT",helperTextColor:"DARKER",redirectUrl:i?o:void 0}):r&&s.createElement(h.QL,{newsletterV3:r})},V=function(e){var n,t,r,o,i,l=e.postId,a=e.publisher,u=s.useRef(null),p=(0,_.v9)((function(e){return e.config.authDomain})),m=(0,_.p9)((function(e){return e.config.isAmp})),g=(0,w.Av)(),f=(0,x.Iq)(),v=(0,y.Hk)().value,h=!!(0,b.V)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),M=null==(0,_.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(p)),C=!v&&M&&h,T=a.newsletterV3,I=null==T?void 0:T.type,N=a.username,V=void 0===N?"":N,L=(0,S.iBn)(null!==(n=null==T?void 0:T.slug)&&void 0!==n?n:"",p,I===O.Rr.NEWSLETTER_TYPE_COLLECTION?a:void 0,I===O.Rr.NEWSLETTER_TYPE_AUTHOR&&V?V:void 0);switch(I){case O.Rr.NEWSLETTER_TYPE_COLLECTION:t="Sign up for ".concat(null==T?void 0:T.name),r="0px",o="You're an editor of ".concat(null==T?void 0:T.name),i=a.viewerEdge.isEditor;break;case O.Rr.NEWSLETTER_TYPE_AUTHOR:t="Get ".concat(a.name,"'s stories in your inbox"),r="6px",o="You cannot subscribe to yourself",i=a.viewerIsUser}var B=!1,j=function(){!B&&D()&&(g.event("newsletterV3.promoViewed",{newsletterV3Id:null==T?void 0:T.id,postId:l}),B=!0)},D=function(){var e;if(!u.current)return!1;var n=null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};return s.useEffect((function(){return j(),window&&P.V6.on("scroll",j),function(){P.V6.off("scroll",j)}}),[]),T&&s.createElement(d.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},s.createElement("div",{ref:u,className:f(A)},s.createElement(c.xu,{paddingBottom:r},s.createElement(E.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},t)),I===O.Rr.NEWSLETTER_TYPE_COLLECTION&&s.createElement(s.Fragment,null,s.createElement(c.xu,{paddingTop:"4px"},s.createElement(E.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(a.name))),s.createElement(c.xu,{paddingTop:"8px",paddingBottom:"10px"},s.createElement(E.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==T?void 0:T.description," ",!m&&s.createElement(c.rU,{inline:!0,linkStyle:"OBVIOUS",href:L},"Take a look.")))),i?s.createElement(c.xu,{paddingTop:"10px"},s.createElement(E.F,{scale:"M",color:"DARKER"},o)):s.createElement(c.xu,{display:"flex",flexWrap:"wrap"},s.createElement(R,{viewer:v,isAmp:m,useCustomDomainLOFlow:C,newsletterV3:T,newsletterV3LandingUrl:L}))))}},62238:(e,n,t)=>{"use strict";t.d(n,{P:()=>S,Z:()=>T});var r=t(59713),o=t.n(r),i=t(67154),l=t.n(i),a=t(63038),s=t.n(a),u=t(6479),c=t.n(u),d=t(28655),p=t.n(d),m=t(82492),g=t.n(m),f=t(71439),v=t(46829),h=t(67294),b=t(2955),y=t(42963),E=t(15789),w=t(72846),x=t(19732);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _(){var e=p()(["\n  query InlineExpandingPostExpandedQuery($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    postResult(id: $postId) {\n      __typename\n      ... on Post {\n        id\n        content(postMeteringOptions: $postMeteringOptions) {\n          bodyModel {\n            paragraphs {\n              name\n              text\n            }\n          }\n        }\n        extendedPreviewContent(\n          truncationConfig: {\n            previewParagraphsWordCountThreshold: 100\n            minimumWordLengthForTruncation: 150\n            truncateAtEndOfSentence: true\n            showFullImageCaptions: true\n            shortformPreviewParagraphsWordCountThreshold: 30\n            shortformMinimumWordLengthForTruncation: 30\n          }\n        ) {\n          bodyModel {\n            ...PostBody_bodyModel\n          }\n        }\n        ...InteractivePostBody_post\n        ...InlineExpandingPost_post\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return _=function(){return e},e}function M(){var e=p()(["\n  fragment InlineExpandingPost_post on Post {\n    id\n    isShortform\n    mediumUrl\n    visibility\n    extendedPreviewContent(\n      truncationConfig: {\n        previewParagraphsWordCountThreshold: 100\n        minimumWordLengthForTruncation: 150\n        truncateAtEndOfSentence: true\n        showFullImageCaptions: true\n        shortformPreviewParagraphsWordCountThreshold: 30\n        shortformMinimumWordLengthForTruncation: 30\n      }\n    ) {\n      bodyModel {\n        ...PostBody_bodyModel\n      }\n    }\n    ...TruncatedPostCard_post\n  }\n  ","\n  ","\n"]);return M=function(){return e},e}var S=(0,f.Ps)(M(),b.Dn,w.Pk),C=(0,f.Ps)(_(),E.U,S,w.Pk);function T(e){var n,t,r=e.post,o=c()(e,["post"]),i=h.createRef(),a=h.useState(null),u=s()(a,2),d=u[0],p=u[1],m=h.useState(!1),f=s()(m,2),P=f[0],_=f[1],M=(0,v.useLazyQuery)(C,{onCompleted:function(e){if((0,x.f)(null==e?void 0:e.postResult))try{var n=function(e){var n,t,r,o,i,l,a,s;if(null==e||null===(n=e.extendedPreviewContent)||void 0===n||null===(t=n.bodyModel)||void 0===t||null===(r=t.paragraphs)||void 0===r||!r.length)throw new Error("Expected post to have preview content.");var u=new Map;null!=e&&null!==(o=e.extendedPreviewContent)&&void 0!==o&&null!==(i=o.bodyModel)&&void 0!==i&&null!==(l=i.paragraphs)&&void 0!==l&&l.length&&e.extendedPreviewContent.bodyModel.paragraphs.forEach((function(e){u.set(e.name,e)}));var c=[],d=[];return null!=e&&null!==(a=e.content)&&void 0!==a&&null!==(s=a.bodyModel)&&void 0!==s&&s.paragraphs&&e.content.bodyModel.paragraphs.forEach((function(e){var n,t=u.get(e.name);t&&t.text.length===(null===(n=e.text)||void 0===n?void 0:n.length)?c.push(t):d.push(e)})),g()({},e,{content:O(O(O({},e.extendedPreviewContent),e.content),{},{isFullContent:!0,bodyModel:O(O(O({},e.extendedPreviewContent.bodyModel),e.content.bodyModel),{},{paragraphs:[].concat(c,d)})})})}(e.postResult);p(n)}catch(e){_(!0)}else _(!0)},onError:function(){_(!0)},variables:{postId:r.id,postMeteringOptions:{}}}),S=s()(M,1)[0],T=h.useCallback((function(e){e.preventDefault(),S()}),[S]);if(P&&r.mediumUrl)return h.createElement(y.l,{to:r.mediumUrl});if(null==r||null===(n=r.extendedPreviewContent)||void 0===n||!n.bodyModel)return null;var I=d?h.createElement(E.b,{isAuroraPostPageEnabled:!0,post:d,ref:i,richTextStyle:"CARD"}):h.createElement(w.yO,{bodyModel:null===(t=r.extendedPreviewContent)||void 0===t?void 0:t.bodyModel,isAuroraPostPageEnabled:!0,richTextStyle:"CARD"});return h.createElement(h.Fragment,null,h.createElement(b.Xc,l()({customPostBody:I,onReadMore:T,showReadMore:!d,post:r},o)))}},15789:(e,n,t)=>{"use strict";t.d(n,{b:()=>R,U:()=>N});var r=t(67154),o=t.n(r),i=t(59713),l=t.n(i),a=t(28655),s=t.n(a),u=t(71439),c=t(80439),d=t(67294),p=t(25415),m=t(40820),g=t(69677),f=t(72846),v=t(91442),h=t(11642);function b(){var e=s()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return b=function(){return e},e}function y(){var e=s()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return y=function(){return e},e}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){l()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){if(!e||"number"!=typeof n||"number"!=typeof t)return null;var r=n,o=t;return e.substr(r,o-r)}var P=(0,u.Ps)(y()),O=(0,u.Ps)(b()),_=t(34675),M=t(31235);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){l()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(){var e=s()(["\n  query InteractivePostBodyQuery($postId: ID!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}function I(){var e=s()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that postMeteringOptions is defined in PostHandler, which uses InteractivePostBody\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}var N=(0,u.Ps)(I(),m.iF,v.iB,O,f.Pk,f.v),A=(0,u.Ps)(T(),m.UW,v.g8,f.XV,f.w6,P),R=d.forwardRef((function(e,n){var t=e.activeGrafId,r=e.activeNoteId,i=e.isAuroraPostPageEnabled,l=e.post,a=e.postBodyInserts,s=e.richTextStyle,u=(0,M.xg)(),b=l.content,y=l.latestPublishedVersion;if(!b)throw new Error("Expected post to have content.");var E={bodyModel:b.bodyModel,creator:l.creator,isAuroraPostPageEnabled:i,postBodyInserts:a,ref:n,richTextStyle:s||"FULL_PAGE"},P=l&&l.creator&&l.creator.allowNotes||!1;return b.isLockedPreviewOnly||u?d.createElement(f.yO,E):d.createElement(c.AE,{notifyOnNetworkStatusChange:!0,ssr:!1,query:A,variables:{postId:l.id,showNotes:P}},(function(e){var n=e.data,i=(n=void 0===n?{}:n).post,a=b.bodyModel&&b.bodyModel.paragraphs,s=function(e,n){return e&&n?e.map((function(e){var t=e.endOffset,r=e.startOffset,o=e.paragraphs&&e.paragraphs[0],i=function(e,n){return e?n.find((function(n){var t=n.name;return e===t})):null}(o.name,n);if(!o||!i)return null;var l=x(o.text,r,t),a=x(i.text,r,t);if(!l||!a)return null;if(l===a)return e;var s=i.text?i.text.indexOf(l):null;if("number"!=typeof s||s<0)return null;var u=s+l.length;return w(w({},e),{},{endOffset:u,startOffset:s})})).filter(h.b):e}(i&&i.highlights||[],a),u=i&&i.privateNotes||null;return d.createElement(g.yb,null,d.createElement(p.KN,{initialActivePrivateNoteId:r,initialActiveGrafName:t},d.createElement(m.Ms,{interactivePost:C(C({},l),{},{latestPublishedVersion:y}),highlights:s},d.createElement(_.I8,{nonBlocking:!0},(function(e){return d.createElement(v.U7,{highlights:s,paragraphs:a,viewer:e},d.createElement(f.yO,o()({},E,{highlights:s,privateNotes:u})))})))))}))}))},68387:(e,n,t)=>{"use strict";t.d(n,{Qw:()=>O,Qj:()=>_,w7:()=>M});var r=t(28655),o=t.n(r),i=t(67154),l=t.n(i),a=t(59713),s=t.n(a),u=t(71439),c=t(67294),d=t(32149),p=t(34675),m=t(62181),g=t(22091),f=t(64504),v=t(62630),h=t(28309),b=t(85277),y=t(67297),E=t(82482),w=t(96879),x=t(27952);function P(){var e=o()(["\n  fragment EntityDrivenSubscriptionCallToAction_creator on User {\n    __typename\n    id\n    name\n    ...useShouldShowEntityDrivenSubscription_creator\n  }\n  ","\n"]);return P=function(){return e},e}var O="entity_driven_subscription",_=function(e){var n,t,r,o,i=e.creator,a=(0,b.w)(),u=(0,v.Av)(),P=(0,h.Iq)(),O=(0,y.v9)((function(e){return e.config.authDomain})),_=(0,y.v9)((function(e){return e.config.productName})),M=(0,p.Hk)().value,S=null==i?void 0:i.isAllowEdsEnabled,C=null!==(n=null==M?void 0:M.mediumMemberAt)&&void 0!==n&&n,T=null!==(t=null==i?void 0:i.viewerIsUser)&&void 0!==t&&t,I=(0,d.$)("entity_driven_subscription_milestone_1",i),N=T&&S&&C,A=null!==(r=null==i?void 0:i.name)&&void 0!==r?r:"",R=null!==(o=null==i?void 0:i.id)&&void 0!==o?o:"",V=c.useCallback((function(){u.event("entityDrivenSubCallToAction.clicked",{userId:null==M?void 0:M.id,entityId:null==i?void 0:i.id}),N&&a({message:"You're already a ".concat(_," member."),toastStyle:"MESSAGE"})}),[i,M,O]);c.useEffect((function(){S&&u.event("experiment.eligible",{experimentId:"65da28af5652"})}),[S]);var L=(0,w.Rk)((0,x.c5p)(O),{subscribeToUserId:R});return I?c.createElement("div",{className:P((function(e){var n;return n={borderTop:"4px solid ".concat(e.accentColor.border.normal),backgroundColor:e.baseColor.background.light},s()(n,E.xl(e),{padding:"38px",marginTop:"40px",marginBottom:"40px"}),s()(n,E.lg(e),{padding:"38px",marginTop:"40px",marginBottom:"40px"}),s()(n,E.md(e),{padding:"38px",marginTop:"32px",marginBottom:"32px"}),s()(n,E.sm(e),{padding:"24px 24px 28px 24px",marginTop:"32px",marginBottom:"32px"}),s()(n,E.xs(e),{padding:"24px 24px 28px 24px",marginTop:"32px",marginBottom:"32px"}),n}))},c.createElement(g.xu,null,c.createElement(f.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},"Read everything from ",A," — and more.")),c.createElement(g.xu,{paddingTop:"10px",paddingBottom:"30px"},c.createElement(f.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Upgrade to Medium membership to directly support independent writers and get unlimited access to everything on Medium.")),c.createElement(g.xu,{display:"flex",flexDirection:"row"},c.createElement(g.zx,l()({onClick:V,buttonStyle:"STRONG"},C?void 0:{href:L}),"Become a member"),!M&&c.createElement(c.Fragment,null,c.createElement(f.F,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},color:"DARKER"},c.createElement(g.xu,{marginLeft:"12px",display:"flex",flexDirection:"column"},"Already a member?",c.createElement(m.R9,{operation:"login",linkStyle:"OBVIOUS",inline:!0,susiEntry:"entity_driven_subscription_cta"},"Sign In")))))):null},M=(0,u.Ps)(P(),d.G)},32149:(e,n,t)=>{"use strict";t.d(n,{$:()=>u,G:()=>c});var r=t(28655),o=t.n(r),i=t(71439),l=t(53976),a=t(34675);function s(){var e=o()(["\n  fragment useShouldShowEntityDrivenSubscription_creator on User {\n    isAllowEdsEnabled\n    viewerIsUser\n  }\n"]);return s=function(){return e},e}var u=function(e,n){var t,r,o=(0,a.Hk)().value,i=(0,l.V)({name:e,placeholder:!1}),s=null!==(t=null==o?void 0:o.mediumMemberAt)&&void 0!==t&&t,u=null==n?void 0:n.isAllowEdsEnabled,c=null!==(r=null==n?void 0:n.viewerIsUser)&&void 0!==r&&r;return!!n&&(u&&!o||u&&c||!!i&&u&&!s)},c=(0,i.Ps)(s())}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/303.3d53891c.chunk.js.map